<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Catan Online</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <div id="app">
    <!-- Main Menu -->
    <div id="menu" class="screen active">
      <h1 class="menu-title">Catan Online</h1>
      <div class="menu-cards">
        <div class="menu-card">
          <h2>Play!</h2>
          <div class="menu-content">
            <input type="text" id="playerName" placeholder="Enter your name" maxlength="20">
            <div class="open-games-section">
              <h3>Open Games</h3>
              <div id="openGamesList" class="open-games-list">
                <p class="loading-text">Loading...</p>
              </div>
            </div>
            <div class="divider">OR</div>
            
            <button id="createGameBtn" class="btn btn-primary">Create New Game</button>
            
          </div>
        </div>
        <div class="menu-card">
          <h2>Recent Games</h2>
          <div class="game-history-list">
            <div id="gameHistoryList" class="game-history-list-content">
              <p class="loading-text">Loading...</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Lobby Screen -->
    <div id="lobby" class="screen">
      <div class="lobby-container">
        <h2>Game Lobby</h2>
        <div class="game-id-display">
          Game ID: <span id="lobbyGameId"></span>
        </div>
        <div class="players-list">
          <h3>Players:</h3>
          <ul id="playersList"></ul>
        </div>
        <div class="lobby-buttons">
          <button id="startGameBtn" class="btn btn-primary">Start Game</button>
          <button id="leaveLobbyBtn" class="btn btn-secondary">Leave</button>
        </div>
      </div>
    </div>

    <!-- Game Screen -->
    <div id="game" class="screen">
      <div id="robberNotice" class="robber-notice" style="display: none;">
        Click on a hex to move the robber!
      </div>
      <div id="knightNotice" class="robber-notice" style="display: none;">
        Playing Knight Card - Click on a hex to move the robber!
      </div>
      <div id="roadBuildingNotice" class="robber-notice" style="display: none;">
        <strong>Road Building:</strong> Click "Build Road" to place your free roads (<span id="freeRoadsRemaining">2</span> remaining)
      </div>

      <div class="game-main">
        <div class="board-container">
          <canvas id="gameBoard"></canvas>
        </div>

        <div class="sidebar">
          <!-- Game Info -->
          <div class="game-info-sidebar">
            <div class="phase-timeline">
              <div class="phase-step" data-phase="setup">
                <div class="phase-dot"></div>
                <div class="phase-label">Setup</div>
              </div>
              <div class="phase-line"></div>
              <div class="phase-step" data-phase="playing">
                <div class="phase-dot"></div>
                <div class="phase-label">Playing</div>
              </div>
              <div class="phase-line"></div>
              <div class="phase-step" data-phase="finished">
                <div class="phase-dot"></div>
                <div class="phase-label">Game Over</div>
              </div>
            </div>
            <div class="dice-container">
              <div class="dice-display">
                <div class="die" id="die1">
                  <div class="die-face">
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                  </div>
                </div>
                <span class="dice-plus">+</span>
                <div class="die" id="die2">
                  <div class="die-face">
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                  </div>
                </div>
                <span class="dice-equals">=</span>
                <div class="dice-total" id="diceTotal">0</div>
              </div>
            </div>
          </div>

          <!-- Scoreboard -->
          <div class="scoreboard">
            <h3>Players</h3>
            <div id="scoreboardContent" class="scoreboard-content">
              <!-- Players will be dynamically inserted here -->
            </div>
          </div>

          <div class="actions">
            <h3>Actions</h3>
            <button id="rollDiceBtn" class="btn btn-action" disabled>
              Roll Dice
            </button>
            <button id="buildSettlementBtn" class="btn btn-action btn-half" disabled>
              Build Settlement
            </button>
            <button id="buildCityBtn" class="btn btn-action btn-half" disabled>
              Build City
            </button>
            <button id="buildRoadBtn" class="btn btn-action btn-half" disabled>
              Build Road
            </button>
            <button id="buyDevCardBtn" class="btn btn-action btn-half" disabled>
              Buy Dev Card
            </button>
            <button id="tradeBtn" class="btn btn-action btn-half" disabled>
              Trade with Others
            </button>
            <button id="bankTradeBtn" class="btn btn-action btn-half" disabled>
              Trade with Bank
            </button>
            <button id="endTurnBtn" class="btn btn-action" disabled>
              End Turn
            </button>
          </div>

          <div class="player-info">
            <h3>Your Resources</h3>
            <div id="playerResources">
              <div class="resource-list">
                <div class="resource">
                  <span class="resource-icon">üå≤</span>
                  <span class="resource-count" id="wood">0</span>
                </div>
                <div class="resource">
                  <span class="resource-icon">üß±</span>
                  <span class="resource-count" id="brick">0</span>
                </div>
                <div class="resource">
                  <span class="resource-icon">üêë</span>
                  <span class="resource-count" id="sheep">0</span>
                </div>
                <div class="resource">
                  <span class="resource-icon">üåæ</span>
                  <span class="resource-count" id="wheat">0</span>
                </div>
                <div class="resource">
                  <span class="resource-icon">‚õ∞Ô∏è</span>
                  <span class="resource-count" id="ore">0</span>
                </div>
              </div>
            </div>
          </div>

          <div class="development-cards">
            <h3>Development Cards (<span id="devCardCount">0</span>)</h3>
            <div id="developmentCardsList" class="dev-cards-list">
              <p class="no-cards">No development cards yet</p>
            </div>
          </div>
          
        </div>
      </div>

      <div class="message-log collapsed">
        <div class="message-log-header" id="messageLogToggle">
          <span>Game Log</span>
          <span class="toggle-icon">‚ñ≤</span>
        </div>
        <div class="message-log-content">
          <div id="gameLog"></div>
        </div>
      </div>
    </div>

    <!-- Trade Modal -->
    <div id="tradeModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Create Trade Offer</h2>
          <span class="close-modal">&times;</span>
        </div>
        <div class="modal-body">
          <div class="trade-section">
            <h3>You Give:</h3>
            <div class="resource-selectors" id="offeringResources">
              <div class="resource-selector">
                <label>üå≤</label>
                <input type="number" id="give-wood" min="0" value="0">
              </div>
              <div class="resource-selector">
                <label>üß±</label>
                <input type="number" id="give-brick" min="0" value="0">
              </div>
              <div class="resource-selector">
                <label>üêë</label>
                <input type="number" id="give-sheep" min="0" value="0">
              </div>
              <div class="resource-selector">
                <label>üåæ</label>
                <input type="number" id="give-wheat" min="0" value="0">
              </div>
              <div class="resource-selector">
                <label>‚õ∞Ô∏è</label>
                <input type="number" id="give-ore" min="0" value="0">
              </div>
            </div>
          </div>
          <div class="trade-section">
            <h3>You Get:</h3>
            <div class="resource-selectors" id="requestingResources">
              <div class="resource-selector">
                <label>üå≤</label>
                <input type="number" id="get-wood" min="0" value="0">
              </div>
              <div class="resource-selector">
                <label>üß±</label>
                <input type="number" id="get-brick" min="0" value="0">
              </div>
              <div class="resource-selector">
                <label>üêë</label>
                <input type="number" id="get-sheep" min="0" value="0">
              </div>
              <div class="resource-selector">
                <label>üåæ</label>
                <input type="number" id="get-wheat" min="0" value="0">
              </div>
              <div class="resource-selector">
                <label>‚õ∞Ô∏è</label>
                <input type="number" id="get-ore" min="0" value="0">
              </div>
            </div>
          </div>
          <div class="trade-section">
            <h3>Trade With:</h3>
            <select id="tradeTarget">
              <option value="">All Players</option>
            </select>
          </div>
        </div>
        <div class="modal-footer">
          <button id="submitTradeBtn" class="btn btn-primary">Offer Trade</button>
          <button id="cancelTradeBtn" class="btn btn-secondary">Cancel</button>
        </div>
      </div>
    </div>

    <!-- Bank Trade Modal -->
    <div id="bankTradeModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Trade with Bank (4:1)</h2>
          <span class="close-modal" id="closeBankTradeBtn">&times;</span>
        </div>
        <div class="modal-body">
          <p>Trade 4 of one resource for 1 of any other resource</p>
          <div class="trade-section">
            <h3>Give 4 of:</h3>
            <select id="bankGiveResource">
              <option value="">Select Resource</option>
              <option value="wood">Wood</option>
              <option value="brick">Brick</option>
              <option value="sheep">Sheep</option>
              <option value="wheat">Wheat</option>
              <option value="ore">Ore</option>
            </select>
          </div>
          <div class="trade-section">
            <h3>Receive 1 of:</h3>
            <select id="bankReceiveResource">
              <option value="">Select Resource</option>
              <option value="wood">Wood</option>
              <option value="brick">Brick</option>
              <option value="sheep">Sheep</option>
              <option value="wheat">Wheat</option>
              <option value="ore">Ore</option>
            </select>
          </div>
        </div>
        <div class="modal-footer">
          <button id="submitBankTradeBtn" class="btn btn-primary">Trade with Bank</button>
          <button id="cancelBankTradeBtn" class="btn btn-secondary">Cancel</button>
        </div>
      </div>
    </div>

    <!-- Trade Offers Panel -->
    <div id="tradeOffersPanel" class="trade-offers-panel">
      <h3>Active Trade Offers</h3>
      <div id="tradeOffersList"></div>
    </div>

    <!-- Discard Modal -->
    <div id="discardModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Discard Cards</h2>
        </div>
        <div class="modal-body">
          <p id="discardMessage">You must discard <span id="discardAmount">0</span> cards.</p>
          <div class="resource-selectors" id="discardResources">
            <div class="resource-selector">
              <label>üå≤</label>
              <input type="number" id="discard-wood" min="0" value="0">
            </div>
            <div class="resource-selector">
              <label>üß±</label>
              <input type="number" id="discard-brick" min="0" value="0">
            </div>
            <div class="resource-selector">
              <label>üêë</label>
              <input type="number" id="discard-sheep" min="0" value="0">
            </div>
            <div class="resource-selector">
              <label>üåæ</label>
              <input type="number" id="discard-wheat" min="0" value="0">
            </div>
            <div class="resource-selector">
              <label>‚õ∞Ô∏è</label>
              <input type="number" id="discard-ore" min="0" value="0">
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button id="submitDiscardBtn" class="btn btn-primary">Discard Cards</button>
        </div>
      </div>
    </div>

    <!-- Steal Card Modal -->
    <div id="stealModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Steal a Card</h2>
        </div>
        <div class="modal-body">
          <p>Choose a player to steal from:</p>
          <div id="stealTargets"></div>
        </div>
      </div>
    </div>

    <!-- Year of Plenty Modal -->
    <div id="yearOfPlentyModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Year of Plenty</h2>
          <span class="close-modal" id="closeYearOfPlentyBtn">&times;</span>
        </div>
        <div class="modal-body">
          <p>Choose 2 resources from the bank:</p>
          <div class="trade-section">
            <h3>First Resource:</h3>
            <select id="yearOfPlentyResource1">
              <option value="">Select Resource</option>
              <option value="wood">Wood</option>
              <option value="brick">Brick</option>
              <option value="sheep">Sheep</option>
              <option value="wheat">Wheat</option>
              <option value="ore">Ore</option>
            </select>
          </div>
          <div class="trade-section">
            <h3>Second Resource:</h3>
            <select id="yearOfPlentyResource2">
              <option value="">Select Resource</option>
              <option value="wood">Wood</option>
              <option value="brick">Brick</option>
              <option value="sheep">Sheep</option>
              <option value="wheat">Wheat</option>
              <option value="ore">Ore</option>
            </select>
          </div>
        </div>
        <div class="modal-footer">
          <button id="submitYearOfPlentyBtn" class="btn btn-primary">Take Resources</button>
          <button id="cancelYearOfPlentyBtn" class="btn btn-secondary">Cancel</button>
        </div>
      </div>
    </div>

    <!-- Monopoly Modal -->
    <div id="monopolyModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Monopoly</h2>
          <span class="close-modal" id="closeMonopolyBtn">&times;</span>
        </div>
        <div class="modal-body">
          <p>Choose a resource to take from all other players:</p>
          <div class="trade-section">
            <h3>Resource Type:</h3>
            <select id="monopolyResource">
              <option value="">Select Resource</option>
              <option value="wood">Wood</option>
              <option value="brick">Brick</option>
              <option value="sheep">Sheep</option>
              <option value="wheat">Wheat</option>
              <option value="ore">Ore</option>
            </select>
          </div>
        </div>
        <div class="modal-footer">
          <button id="submitMonopolyBtn" class="btn btn-primary">Take All</button>
          <button id="cancelMonopolyBtn" class="btn btn-secondary">Cancel</button>
        </div>
      </div>
    </div>

  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="/js/client.js"></script>
  <script src="/js/renderer.js"></script>
</body>
</html>
